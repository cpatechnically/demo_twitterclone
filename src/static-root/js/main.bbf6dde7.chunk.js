(this["webpackJsonptweetme2-web"]=this["webpackJsonptweetme2-web"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(6),o=n.n(a),r=(n(12),n.p+"static/media/logo.6ce24c58.svg"),l=(n(13),n(7)),i=n(2),u="http://127.0.0.1:8000/api";function b(e,t,n,s){var c;s&&(c=s);var a=new XMLHttpRequest,o="".concat(u).concat(t);a.responseType="json";var r=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),s=0;s<n.length;s++){var c=n[s].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");a.open(e,o),a.setRequestHeader("Content-Type","application/json"),r&&(a.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-CSRFToken",r)),a.onload=function(){var e=a.response,t=a.response.results?a.response.results:[];t.length>0&&(e=t,console.log("respResults > 0 ->",t,"respData",e)),console.log("XHR RETURINNING.. ->",e),n(e,a.status)},a.onerror=function(e){console.log(e),n({message:"The request was an error"},400)},a.send(c)}var j=n(0);function p(e){var t=e.tweet,n=e.action,c=Object(s.useState)(t.likes?t.likes:0),a=Object(i.a)(c,2),o=a[0],r=a[1],l=Object(s.useState)((t.userLike,!1)),u=Object(i.a)(l,2),p=u[0],d=u[1],m=e.className?e.className:"btn btn-primary btn-sm",w=n.display?n.display:"Action",h=function(e,t){console.log(t,e),"like"===n.type&&(!0===p?(r(o-1),d(!1)):(r(o+1),d(!0)))},O="like"===n.type?"".concat(o," ").concat(w):w;return Object(j.jsxs)("button",{className:m,onClick:function(e){e.preventDefault(),function(e,t,n){b("POST","/tweets/action/",n,{id:e,action:t})}(t.id,n.type,h)},children:[O," "]})}function d(e){var t=e.tweet,n=e.className?e.className:"col-10 mx-auto col-6";return Object(j.jsxs)("div",{className:n,children:[Object(j.jsxs)("p",{children:[t.id,"-",t.content]}),Object(j.jsxs)("div",{className:"btn btn-group",children:[Object(j.jsx)(p,{tweet:t,action:{type:"like",display:"Likes"},className:"btn btn-primary"}),Object(j.jsx)(p,{tweet:t,action:{type:"unlike",display:"Unlike"},className:"btn btn-primary"}),Object(j.jsx)(p,{tweet:t,action:{type:"retweet",display:"retweet"},className:"btn btn-primary"})]})]})}function m(e){var t=c.a.createRef(),n=Object(s.useState)([]),a=Object(i.a)(n,2),o=a[0],r=a[1];console.log("TweetsComponent props",e,"ABOVE handleSubmit newTweets",o.length,o);return Object(j.jsxs)("div",{className:e.className,children:[Object(j.jsx)("h1",{children:"TweetsComponent"}),Object(j.jsxs)("div",{className:"col-12 mb-3",children:[Object(j.jsx)("h3",{children:"Tweets Form"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=t.current.value,s=Object(l.a)(o);s.unshift({content:n,likes:0,id:12313}),r(s),t.current.value="",console.log("IN handleSubmitFunction AFTER setNewTweets update newTweets -> ",o.length,o)},children:[Object(j.jsx)("textarea",{ref:t,required:!0,className:"form-control"}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary my-3",children:"Tweet"})]})]}),Object(j.jsx)("h1",{children:"TweetsList"}),Object(j.jsx)(w,{newTweets:o})]})}function w(e){var t=Object(s.useState)([]),n=Object(i.a)(t,2),c=n[0],a=n[1],o=Object(s.useState)([]),r=Object(i.a)(o,2),p=r[0],m=r[1],w=Object(s.useState)(!1),h=Object(i.a)(w,2),O=h[0],g=h[1];return console.log("TweetsList -> tweetsDidSet",O," tweetsInit",c.length,c," props.newTweets->",e.newTweets.length,e.newTweets),Object(s.useEffect)((function(){var t=Object(l.a)(e.newTweets).concat(c);console.log("concatenating to create final props.newTweets",e.newTweets.length,"tweetsInit",c.length," final ",t.length),t.length!==p.length&&(console.log("SUCCESS FINAL.length !== tweets.length"),m(t))}),[e.newTweets,p,c]),Object(s.useEffect)((function(){if(!0!==O){e=function(e,t){200===t&&a(e)},console.log("CALLED loadTweets...apiUrl",u),b("GET","/tweets/",e)}var e;g(!0)}),[]),p.map((function(e,t){return Object(j.jsx)(d,{tweet:e,className:"my-5 py-5 border bg-white text-dark"},e.id)}))}var h=function(e){return console.log("props",e),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)("img",{src:r,className:"App-logo",alt:"logo"}),Object(j.jsxs)("p",{children:["Edit ",Object(j.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(j.jsx)("div",{children:Object(j.jsx)(m,{})}),Object(j.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},O=document.getElementById("root"),g=c.a.createElement;O&&o.a.render(Object(j.jsx)(h,{}),O);var f=document.getElementById("tweet2");f&&(console.log(f.dataset.user),o.a.render(g(h,f.dataset),f))}},[[15,1,2]]]);
//# sourceMappingURL=main.bbf6dde7.chunk.js.map