(this["webpackJsonptweetme2-web"]=this["webpackJsonptweetme2-web"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(7),r=n.n(a),o=(n(12),n.p+"static/media/logo.6ce24c58.svg"),i=(n(13),n(6)),l=n(2);function u(e,t,n,s){var c;s&&(c=s);var a=new XMLHttpRequest,r="".concat("http://127.0.0.1:8000/api").concat(t);a.responseType="json";var o=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),s=0;s<n.length;s++){var c=n[s].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");a.open(e,r),a.setRequestHeader("Content-Type","application/json"),o&&(a.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest"),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-CSRFToken",o)),a.onload=function(){n(a.response,a.status)},a.onerror=function(e){console.log(e),n({message:"The request was an error"},400)},a.send(c)}var b=n(0);function j(e){var t=e.tweet,n=e.action,c=Object(s.useState)(t.likes?t.likes:0),a=Object(l.a)(c,2),r=a[0],o=a[1],i=Object(s.useState)((t.userLike,!1)),j=Object(l.a)(i,2),p=j[0],d=j[1],m=e.className?e.className:"btn btn-primary btn-sm",O=n.display?n.display:"Action",f=function(e,t){console.log(t,e),"like"===n.type&&(!0===p?(o(r-1),d(!1)):(o(r+1),d(!0)))},h="like"===n.type?"".concat(r," ").concat(O):O;return Object(b.jsxs)("button",{className:m,onClick:function(e){e.preventDefault(),function(e,t,n){u("POST","/tweets/action/",n,{id:e,action:t})}(t.id,n.type,f)},children:[h," "]})}function p(e){var t=e.tweet,n=e.className?e.className:"col-10 mx-auto col-6";return Object(b.jsxs)("div",{className:n,children:[Object(b.jsxs)("p",{children:[t.id,"-",t.content]}),Object(b.jsxs)("div",{className:"btn btn-group",children:[Object(b.jsx)(j,{tweet:t,action:{type:"like",display:"Likes"},className:"btn btn-primary"}),Object(b.jsx)(j,{tweet:t,action:{type:"unlike",display:"Unlike"},className:"btn btn-primary"}),Object(b.jsx)(j,{tweet:t,action:{type:"retweet",display:"retweet"},className:"btn btn-primary"})]})]})}function d(e){console.log("TweetsComponent props",e);var t=c.a.createRef(),n=Object(s.useState)([]),a=Object(l.a)(n,2),r=a[0],o=a[1],j=function(e,t){var n=Object(i.a)(r);201===t?(n.unshift(e),o(n)):(console.log(e),alert("An error occured"))};return Object(b.jsxs)("div",{className:e.className,children:[Object(b.jsx)("div",{className:"col-12 mb-3",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=t.current.value;u("POST","/tweets/create/",j,{content:n}),t.current.value=""},children:[Object(b.jsx)("textarea",{ref:t,required:!0,className:"form-control"}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary my-3",children:"Tweet"})]})}),Object(b.jsx)(m,{newTweets:r})]})}function m(e){console.log("TweetsList props",e);var t=Object(s.useState)([]),n=Object(l.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)([]),o=Object(l.a)(r,2),j=o[0],d=o[1],m=Object(s.useState)([]),O=Object(l.a)(m,2),f=O[0],h=O[1];return Object(s.useEffect)((function(){var t=Object(i.a)(e.newTweets).concat(c);t.length!==j.length&&d(t)}),[e.newTweets,j,c]),Object(s.useEffect)((function(){if(!1===f){u("GET","/tweets/",(function(e,t){var n=e.results;console.log(e,t,"data",n),200===t&&(a(n),h(!0))}))}}),[c,f,h]),j.map((function(e,t){return Object(b.jsx)(p,{tweet:e,className:"my-5 py-5 border bg-white text-dark"})}))}var O=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("header",{className:"App-header",children:[Object(b.jsx)("img",{src:o,className:"App-logo",alt:"logo"}),Object(b.jsxs)("p",{children:["Edit ",Object(b.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(b.jsx)("div",{children:Object(b.jsx)(d,{})}),Object(b.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},f=(document.getElementById("root"),c.a.createElement),h=document.getElementById("tweet2");h&&(console.log(h.dataset.user),r.a.render(f(O,h.dataset),h))}},[[15,1,2]]]);
//# sourceMappingURL=main.19c7f300.chunk.js.map