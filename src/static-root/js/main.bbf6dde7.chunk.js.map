{"version":3,"sources":["logo.svg","lookup/components.js","tweets/components.js","App.js","index.js"],"names":["apiUrl","backendLookup","method","endpoint","callback","data","jsonData","xhr","XMLHttpRequest","url","responseType","csrftoken","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","getCookie","open","setRequestHeader","onload","respData","response","respResults","results","console","log","status","onerror","e","send","ActionBtn","props","tweet","action","useState","likes","setLikes","userLike","setUserLike","className","actionDisplay","display","handleActionBackendEvent","type","onClick","event","preventDefault","tweetId","id","apiTweetAction","Tweet","content","TweetsComponent","textAreaRef","React","createRef","newTweets","setNewTweets","onSubmit","newVal","current","value","tempNewTweets","unshift","ref","required","TweetsList","tweetsInit","setTweetsInit","tweets","setTweets","tweetsDidSet","setTweetsDidSet","useEffect","final","concat","map","item","idx","App","src","logo","alt","href","target","rel","appRootEl","getElementById","createElement","ReactDOM","render","myTweetEl","dataset","user"],"mappings":"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","file":"static/js/main.bbf6dde7.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","const apiUrl = \"http://127.0.0.1:8000/api\"\r\n\r\nfunction getCookie(name) {\r\n  var cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n    var cookies = document.cookie.split(';');\r\n    for (var i = 0; i < cookies.length; i++) {\r\n      var cookie = cookies[i].trim();\r\n      // Does this cookie string begin with the name we want?\r\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nexport function backendLookup(method, endpoint, callback, data) {\r\n  let jsonData;\r\n  if (data){\r\n    jsonData = data //JSON.stringify(data)\r\n  }\r\n  const xhr = new XMLHttpRequest()\r\n  const url = `${apiUrl}${endpoint}`\r\n  xhr.responseType = \"json\"\r\n  const csrftoken = getCookie(\"csrftoken\");\r\n  xhr.open(method, url)\r\n  xhr.setRequestHeader(\"Content-Type\", \"application/json\")\r\n  if (csrftoken){\r\n    xhr.setRequestHeader(\"HTTP_X_REQUESTED_WITH\", \"XMLHttpRequest\")\r\n    xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\")\r\n    xhr.setRequestHeader(\"X-CSRFToken\", csrftoken)\r\n  }\r\n  xhr.onload = function() {\r\n    let respData = xhr.response\r\n    const respResults = xhr.response.results ? xhr.response.results : []\r\n    if (respResults.length > 0){\r\n      respData = respResults\r\n      console.log(\"respResults > 0 ->\",respResults,\"respData\",respData)\r\n    }\r\n    console.log(\"XHR RETURINNING.. ->\",respData)\r\n    callback(respData, xhr.status)\r\n  }\r\n  xhr.onerror = function(e) {\r\n    console.log(e)\r\n    callback({\"message\": \"The request was an error\"}, 400)\r\n  }\r\n  xhr.send(jsonData)\r\n}\r\n\r\nexport function createTweet(newTweet,callback){\r\n  backendLookup(\"POST\", \"/tweets/create/\",callback,{content:newTweet})\r\n}\r\n\r\nexport function apiTweetAction(tweetId, action, callback){\r\n  const data = {id: tweetId, action:action}\r\n  backendLookup(\"POST\", \"/tweets/action/\",callback,data)\r\n}\r\n\r\nexport function loadTweets(callback) {\r\n  console.log(\"CALLED loadTweets...apiUrl\",apiUrl)\r\n  backendLookup(\"GET\", \"/tweets/\",callback)\r\n}","import React, {useState,useEffect} from 'react';\r\nimport { loadTweets,createTweet,apiTweetAction } from '../lookup';\r\n\r\nexport function ActionBtn(props) {\r\n    //console.log(\"Called ActionBtn funciton props\",props)\r\n    const {tweet,action} = props\r\n    const [likes, setLikes] = useState(tweet.likes ? tweet.likes : 0)\r\n    const [userLike,setUserLike] = useState(tweet.userLike === true ? false : false)\r\n    const className = props.className ? props.className : \"btn btn-primary btn-sm\"\r\n    const actionDisplay = action.display ? action.display : \"Action\"\r\n\r\n    const handleActionBackendEvent = (response,status)=>{\r\n        console.log(status,response)\r\n        if (action.type === 'like'){\r\n            if (userLike === true){\r\n                //set to unlike\r\n                setLikes(likes - 1)\r\n                setUserLike(false)\r\n            } else {\r\n                setLikes(likes + 1)\r\n                setUserLike(true)\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleClick = (event) =>{\r\n        event.preventDefault()\r\n        apiTweetAction(tweet.id, action.type,handleActionBackendEvent)\r\n        \r\n    }\r\n    const display = action.type === 'like' ? `${likes} ${actionDisplay}` : actionDisplay\r\n    return <button className={className} onClick={handleClick}>{display} </button>\r\n}\r\n  \r\n  \r\nexport function Tweet(props){\r\n    //console.log(\"Called tweet funciton props\",props)\r\n    const {tweet} = props\r\n    const className = props.className ? props.className : \"col-10 mx-auto col-6\"\r\n    return <div className={className}>\r\n      <p>{tweet.id}-{tweet.content}</p>\r\n      <div className=\"btn btn-group\">\r\n        <ActionBtn tweet={tweet} action={{type:\"like\",display:\"Likes\"}} className=\"btn btn-primary\"/>\r\n        <ActionBtn tweet={tweet} action={{type:\"unlike\",display:\"Unlike\"}} className=\"btn btn-primary\"/>\r\n        <ActionBtn tweet={tweet} action={{type:\"retweet\",display:\"retweet\"}} className=\"btn btn-primary\"/>\r\n      </div>\r\n    </div>\r\n}\r\n\r\n\r\nexport function TweetsComponent(props){\r\n    const textAreaRef = React.createRef()\r\n    const [newTweets, setNewTweets] = useState([])\r\n    console.log(\"TweetsComponent props\",props,'ABOVE handleSubmit newTweets',newTweets.length,newTweets)\r\n    \r\n    const handleSubmit = (event) =>{\r\n        event.preventDefault()\r\n        const newVal = textAreaRef.current.value\r\n        let tempNewTweets = [...newTweets]\r\n        // console.log(\"newVal\",newVal)\r\n        const handleBackendUpdate = (response,status)=>{\r\n            if (status === 201){\r\n                tempNewTweets.unshift(response)\r\n                setNewTweets(tempNewTweets)\r\n            } else {\r\n                console.log(response)\r\n                alert(\"An error occured\")\r\n            }\r\n        }\r\n        //handle with server\r\n        //createTweet(newVal, handleBackendUpdate)\r\n        tempNewTweets.unshift({\r\n            content:newVal,\r\n            likes:0,\r\n            id:12313\r\n        })\r\n        setNewTweets(tempNewTweets)\r\n        textAreaRef.current.value = \"\"\r\n        console.log(\"IN handleSubmitFunction AFTER setNewTweets update newTweets -> \",newTweets.length,newTweets)\r\n    }\r\n    \r\n\r\n    return <div className={props.className}>\r\n            <h1>TweetsComponent</h1>\r\n            <div className=\"col-12 mb-3\">\r\n            <h3>Tweets Form</h3>\r\n            <form onSubmit={handleSubmit}>\r\n                <textarea ref={textAreaRef} required={true} className='form-control'>\r\n\r\n            </textarea>\r\n            <button type=\"submit\" className=\"btn btn-primary my-3\">Tweet</button>\r\n        </form>\r\n        </div>\r\n        <h1>TweetsList</h1>\r\n        <TweetsList newTweets={newTweets} />\r\n    </div> \r\n}\r\n\r\n\r\nexport function TweetsList(props) {\r\n    const [tweetsInit,setTweetsInit] = useState([])\r\n    const [tweets,setTweets] = useState([])\r\n    const [tweetsDidSet, setTweetsDidSet] = useState(false)\r\n    console.log(\"TweetsList -> tweetsDidSet\",tweetsDidSet,\" tweetsInit\",tweetsInit.length,tweetsInit,\" props.newTweets->\",props.newTweets.length,props.newTweets)\r\n    \r\n    useEffect(()=>{\r\n        const final = [...props.newTweets].concat(tweetsInit)\r\n        console.log(\"concatenating to create final props.newTweets\",props.newTweets.length,\"tweetsInit\",tweetsInit.length,\" final \",final.length)\r\n        if (final.length !== tweets.length){\r\n            console.log(\"SUCCESS FINAL.length !== tweets.length\")\r\n            setTweets(final)\r\n        }\r\n    },[props.newTweets, tweets, tweetsInit])\r\n\r\n    useEffect(()=>{\r\n        if (tweetsDidSet !== true){\r\n            const myCallback = (response,status)=>{\r\n                //console.log(\"status\",status,\"response\",response)\r\n                if (status === 200){\r\n                    setTweetsInit(response)\r\n                }\r\n            }\r\n            loadTweets(myCallback)\r\n        }\r\n        setTweetsDidSet(true)\r\n    },[])\r\n\r\n    return tweets.map((item,idx)=>{\r\n        return <Tweet tweet={item} key={item.id} className='my-5 py-5 border bg-white text-dark'/>\r\n    })\r\n}","import logo from './logo.svg';\nimport './App.css';\n\nimport {TweetsComponent} from './tweets';\n\nfunction App(props) {\n\n  console.log(\"props\",props)\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>\n          Edit <code>src/App.js</code> and save to reload.\n        </p>\n        <div>\n          <TweetsComponent />\n        </div>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nconst appRootEl = document.getElementById('root')\n\nconst e = React.createElement\n\nif (appRootEl){\n  ReactDOM.render(<App />,appRootEl);\n}\n\nconst myTweetEl = document.getElementById('tweet2')\nif (myTweetEl){\n  console.log(myTweetEl.dataset.user)\n  ReactDOM.render(e(App,myTweetEl.dataset),myTweetEl);\n}\n\n\n"],"sourceRoot":""}